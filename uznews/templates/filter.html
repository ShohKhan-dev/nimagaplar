<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filtering</title>
</head>
<body>
    <h1>Filtering HERE!</h1>
    <div class="add-keyword">
        <h2>Add new Keyword</h2>
        <form id="form-add-keyword" action=".">
            Keyword: <input type="text" name="new-keyword" id="addNew-keyword">
            <input type="button" onclick="submitNew()" value="Submit">
        </form>
    </div>
    <div class="accept-ignore">
        <h2>Accept or Ignore keywords:</h2>
        {% for word in words %}
        
        <div id="word-{{word.id}}">
            <hr>
            <p>{{ word.word }}</p>
            <div>
            <!-- <div  style="display: flex;"> -->
                <button style="color: green;" class="accept-btn", onClick="directword({{word.id}}, 'accept')">ACCEPT</button>
                <button style="color: red;" class="ignore-btn" onClick="directword({{word.id}}, 'ignore')">IGNORE</button>
                <span id="add-stopword" style="color: darkred;"></span>
            </div>
        </div>
        
    {% endfor %}

    </div>
    


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>



    

    <script>
        

        
        function directword(id, text) {
            $.ajax({
                url: '{% url "uznews_directword" %}',
                data: {
                    'id': id,
                    'text': text
                },
                dataType: 'json',
                success: function (data) {
                    if (data.deleted) {
                        $("#word-" + id).remove();
                    }
                }
            });
        };

        function submitNew() {
            var form = document.getElementById("form-add-keyword");
            var text = form.elements[0].value;
            const input_field = document.getElementById("#new-keyword")

            const myArray = text.split(" ");

            console.log("--"+text+"--");

            var word = myArray[0];
            console.log(word);

            $.ajax({
                url: '{% url "uznews_addword" %}',
                data: {
                    'word': word,
                },
                dataType: 'json',
                success: function (data) {
                    if (data.saved) {
                        form.elements[0].value = '';
                    }
                }
            });

            

            
        }
    </script>

    
    
</body>
</html>